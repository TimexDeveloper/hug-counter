<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—á—ë—Ç—á–∏–∫ –æ–±–Ω–∏–º–∞—à–µ–∫</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>–ú–µ–Ω—è –æ–±–Ω—è–ª–∏ <span id="counter">0</span> —Ä–∞–∑ ‚ù§Ô∏è</h1>
        <button id="hug-btn">–û–±–Ω—è—Ç—å</button>
    </div>

    <script>
        const counterEl = document.getElementById('counter');
        const btn = document.getElementById('hug-btn');

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç—á–∏–∫–∞
        fetch('/api/hug')
            .then(res => res.json())
            .then(data => counterEl.textContent = data.count);

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–∏–º–∞—à–∫–∏
        btn.addEventListener('click', () => {
            btn.disabled = true;
            fetch('/api/hug', { method: 'POST' })
                .then(res => res.json())
                .then(data => {
                    counterEl.textContent = data.count;
                    btn.textContent = '–û–±–Ω—è—Ç–æ! üòä';
                    setTimeout(() => {
                        btn.textContent = '–û–±–Ω—è—Ç—å';
                        btn.disabled = false;
                    }, 1000);
                });
        });
    </script>
</body>
</html>